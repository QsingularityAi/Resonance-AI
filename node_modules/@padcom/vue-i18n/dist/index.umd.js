(function(u,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(u=typeof globalThis<"u"?globalThis:u||self,n(u["vue-i18n"]={},u.vue))})(this,function(u,n){"use strict";function f(r="en"){var e;return((e=globalThis.navigator)==null?void 0:e.language.split("-")[0])||r}function P(r,e){return Object.getOwnPropertyNames(e).map(l=>typeof e[l]=="string"?{[[...r,l].join(".")]:e[l]}:P([...r,l],e[l])).reduce((l,o)=>({...l,...o}),{})}function g(r){const e={};return Object.getOwnPropertyNames(r).forEach(l=>{const o=P([],r[l]);Object.getOwnPropertyNames(o).forEach(a=>{e[a]=e[a]||{},e[a][l]=o[a]})}),e}function z(...r){const e={};return r.forEach(l=>{Object.getOwnPropertyNames(l).forEach(o=>{e[o]=e[o]||{},Object.getOwnPropertyNames(l[o]).forEach(a=>{e[o][a]=l[o][a]})})}),e}function S(r,e,l){return r==="global"?l:r==="local-first"?z(l,e):e}function m(r,e,l,o){return o[r]?o[r][e]?{locale:e,message:o[r][e]}:o[r][l]?{locale:l,message:o[r][l]}:{locale:f(),message:r}:{locale:f(),message:r}}const h=/{\s*(\w+)\s*}/g;function L(r){return(e,l)=>r.hasOwnProperty(l)?r[l]:e}function R(r,e){if(e===0)return 0;if(e===1)return 0;if(e===2)switch(r){case 1:return 0;default:return 1}else switch(r){case 0:return 0;case 1:return 1;default:return 2}}function v(r,e,l){const o=l[r.locale]||R,a=r.message.split("|").map(t=>t.trim());return a[o(e,a.length)]}const w=Symbol("vue-i18n-pluralization-rules"),y=Symbol("vue-i18n-translations"),I=Symbol("vue-i18n-fallback-locale"),O=Symbol("vue-i18n-locale"),c={};function T({locale:r=f(),fallbackLocale:e=f(),messages:l={},pluralizationRules:o={}}={}){if(c.locale||c.fallbackLocale||c.translations)throw new Error("vue-i18n already initialized");return c.locale=n.ref(r),c.fallbackLocale=n.ref(e),c.translations=S("global",g({}),g(l)),c.pluralizationRules=o||{},{get locale(){return c.locale.value},set locale(a){c.locale.value=a},get fallbackLocale(){return c.fallbackLocale.value},set fallbackLocale(a){c.fallbackLocale.value=a},get availableLocales(){return Object.getOwnPropertyNames(l)},t(a,t={}){const{message:b}=m(a,this.locale,this.fallbackLocale,c.translations);return b.replace(h,L(t))},tc(a,t,b={}){const p=m(a,this.locale,this.fallbackLocale,c.translations);return v(p,t,o).replace(h,L(b))}}}function V({locale:r=f(),fallbackLocale:e=f(),messages:l={},pluralizationRules:o={}}){const a=n.ref(r);n.provide(O,n.ref(a));const t=n.ref(e);return n.provide(I,n.ref(t)),n.provide(y,g(l)),n.provide(w,o),{locale:a,fallbackLocale:t}}function $({useScope:r="local-first"}={}){var N,j;const e=c.locale||n.inject(O),l=c.fallbackLocale||n.inject(I),o=c.pluralizationRules||n.inject(w),a=c.translations||n.inject(y),t=n.getCurrentInstance(),b=((N=t==null?void 0:t.type)==null?void 0:N.i18n)||((j=t==null?void 0:t.proxy)==null?void 0:j.$options.i18n)||{};if(!(e&&l&&a&&o))throw new Error("vue-i18n not initialized. Either call createI18n() or createI18nContext()");const p=S(r,g(b),a);return n.watch(e,()=>{var s,i;t!=null&&t.update&&(t==null||t.update()),(s=t==null?void 0:t.proxy)!=null&&s.$forceUpdate&&((i=t==null?void 0:t.proxy)==null||i.$forceUpdate())}),n.watch(l,()=>{var s,i;t!=null&&t.update&&(t==null||t.update()),(s=t==null?void 0:t.proxy)!=null&&s.$forceUpdate&&((i=t==null?void 0:t.proxy)==null||i.$forceUpdate())}),{fallbackLocale:l,locale:e,get availableLocales(){const s=new Set;return Object.getOwnPropertyNames(p).forEach(i=>{Object.getOwnPropertyNames(p[i]).forEach(d=>{s.add(d)})}),[...s]},t(s,i={}){const{message:d}=m(s,e.value,l.value,p);return d.replace(h,L(i))},tc(s,i,d={}){const E=m(s,e.value,l.value,p);return v(E,i,o).replace(h,L(d))}}}u.VueI18NFallbackLocaleSymbol=I,u.VueI18NLocaleSymbol=O,u.VueI18NPluralizationRulesSymbol=w,u.VueI18NTranslationsSymbol=y,u.createI18Context=V,u.createI18n=T,u.getAgentLocale=f,u.useI18n=$,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
